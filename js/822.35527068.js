"use strict";(self["webpackChunklove_admin"]=self["webpackChunklove_admin"]||[]).push([[822],{1822:function(e,t,r){r.r(t),r.d(t,{default:function(){return n}});var a=function(){var e=this,t=e._self._c;return t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-row",{attrs:{gutter:20}},[t("el-col",{staticStyle:{margin:"20px 0 0 50px"},attrs:{span:23}},[t("el-col",{staticStyle:{"margin-right":"50px"},attrs:{span:12}},[t("div",{staticStyle:{"margin-bottom":"20px"}},[e.ruleForm.imgUrl?t("el-image",{staticClass:"avatar",attrs:{fit:"cover",src:e.ruleForm.imgUrl}}):e._e()],1),t("div",[t("h2",{staticClass:"titleStyle"},[e._v("队伍基础信息")]),t("el-form-item",{attrs:{label:"队伍名称：",prop:"name"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"成立时间："}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.createTime,callback:function(t){e.$set(e.ruleForm,"createTime",t)},expression:"ruleForm.createTime"}})],1),t("el-form-item",{attrs:{label:"队伍规模：",prop:"size"}},[t("el-input-number",{attrs:{min:e.ruleForm.memberNumber,max:500},model:{value:e.ruleForm.size,callback:function(t){e.$set(e.ruleForm,"size",t)},expression:"ruleForm.size"}}),t("span",{staticClass:"tip"},[e._v("(队伍现人数为 "),t("i",[e._v(e._s(e.ruleForm.memberNumber))]),e._v("人，不可少于该数字)")])],1),t("el-form-item",{attrs:{label:"队伍地址：",prop:"address"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.address,callback:function(t){e.$set(e.ruleForm,"address",t)},expression:"ruleForm.address"}})],1)],1)]),t("el-col",{attrs:{span:10}},[t("div",[t("h2",{staticClass:"titleStyle"},[e._v("队伍联系人")]),t("el-form-item",{attrs:{label:"姓名：",prop:"contactName"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.contactName,callback:function(t){e.$set(e.ruleForm,"contactName",t)},expression:"ruleForm.contactName"}})],1),t("el-form-item",{attrs:{label:"手机号：",prop:"contactPhone"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.contactPhone,callback:function(t){e.$set(e.ruleForm,"contactPhone",t)},expression:"ruleForm.contactPhone"}})],1),t("el-form-item",{attrs:{label:"邮箱：",prop:"contactEmail"}},[t("el-input",{attrs:{clearable:""},model:{value:e.ruleForm.contactEmail,callback:function(t){e.$set(e.ruleForm,"contactEmail",t)},expression:"ruleForm.contactEmail"}})],1)],1),t("div",[t("h2",{staticClass:"titleStyle"},[e._v("队伍详情")]),t("el-form-item",{attrs:{label:"服务总时长："}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.totalDuration,callback:function(t){e.$set(e.ruleForm,"totalDuration",t)},expression:"ruleForm.totalDuration"}})],1),t("el-form-item",{attrs:{label:"开展活动数："}},[t("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.itemNumber,callback:function(t){e.$set(e.ruleForm,"itemNumber",t)},expression:"ruleForm.itemNumber"}})],1),t("el-form-item",{attrs:{label:"队伍介绍：",prop:"introduction"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},clearable:""},model:{value:e.ruleForm.introduction,callback:function(t){e.$set(e.ruleForm,"introduction",t)},expression:"ruleForm.introduction"}})],1)],1)])],1)],1),t("el-row",{staticClass:"subBOX"},[t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("提交修改")]),t("el-button",{attrs:{type:"warning"},on:{click:e.resetForm}},[e._v("重置表单")])],1)],1)],1)},l=[],s=r(3822),m={name:"MyTeam",data(){return{rules:{name:[{required:!0,message:"请输入队伍名称",trigger:"blur"},{min:3,max:15,message:"队伍名称长度在 3 到 15 个字符",trigger:"blur"}],size:[{required:!0,message:"请输入队伍需要的总人数",trigger:"blur"}],address:[{required:!0,message:"请输入队伍详细地址",trigger:"blur"},{min:5,message:"请输入详细地址",trigger:"blur"}],contactName:[{required:!0,message:"请输入联系人的姓名",trigger:"blur"},{min:2,message:"请输入正确的姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系人的手机号码",trigger:"blur"},{min:11,max:12,message:"请输入正确的手机号码",trigger:"blur"}],contactEmail:[{required:!0,message:"请输入联系人的邮箱",trigger:"blur"},{min:6,max:30,message:"请输入正确的邮箱",trigger:"blur"}],introduction:[{required:!0,message:"请输入队伍的详细介绍",trigger:"blur"},{min:10,message:"队伍介绍最少 10 个字符",trigger:"blur"}]},ruleForm:{},backupsForm:{},timeCreate:"",timestamp:""}},mounted(){this.getMyTeam(this.member.teamId)},computed:{...(0,s.rn)({member:e=>e.user.member})},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return this.$message({message:"请检查输入框中的内容是否不符合修改规则！",type:"warning"}),!1;this.ruleForm.createTime=this.timeCreate,this.ruleForm.totalDuration=this.timestamp,this.updateTeam(this.ruleForm)}))},resetForm(){for(let e in this.backupsForm)this.$set(this.ruleForm,e,this.backupsForm[e])},async getMyTeam(e){let t=await this.$http.reqGetMyTeam(e);if(console.log("获取我的志愿服务队",t),0==t.code){this.timeCreate=t.data.createTime,this.timestamp=t.data.totalDuration;let e=t.data.createTime.split("T");t.data.createTime=`${e[0]} ${e[1].split(".")[0]}`,t.data.totalDuration=this.timestampfun(t.data.totalDuration),this.ruleForm=t.data,this.backupsForm=JSON.parse(JSON.stringify(t.data))}else this.$message.error(t.msg)},async updateTeam(e){let t=await this.$http.reqUpdateTeam(e);console.log("提交修改服务队信息",t),0==t.code?(this.$message({message:"您的提交的修改志愿队伍的信息已经提交！",type:"success"}),this.getMyTeam(this.member.teamId)):this.$message.error(t.msg)},timestampfun(e){if(void 0!=e){if(0==e)return"0 小时";const t=Math.floor(e/36e5),r=Math.floor(e%36e5/6e4),a=Math.floor(e%6e4/1e3);let l="";return t>0&&(l+=t+"时"),r>0&&(l+=r+"分"),a>0&&(l+=a+"秒"),l}}}},i=m,o=r(1001),u=(0,o.Z)(i,a,l,!1,null,"534b837d",null),n=u.exports}}]);