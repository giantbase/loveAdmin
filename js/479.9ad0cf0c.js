"use strict";(self["webpackChunklove_admin"]=self["webpackChunklove_admin"]||[]).push([[479],{4479:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"search"},[e("el-button",{attrs:{type:"warning",disabled:t.disabled},on:{click:function(e){return t.proSelection()}}},[t._v(" 批量审核 ")]),e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}},[e("el-button",{staticClass:"searchInput",attrs:{slot:"append",icon:"el-icon-search"},slot:"append"},[t._v("搜索")])],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"35",align:"center"}}),e("el-table-column",{attrs:{label:"编号",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.id))])]}}])}),e("el-table-column",{attrs:{label:"队名",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{label:"队伍图片",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-image",{staticStyle:{width:"100%"},attrs:{fit:"cover",src:a.row.imgUrl}}),e("el-image",{staticClass:"recycleIMG",attrs:{slot:"reference",fit:"cover",src:a.row.imgUrl},slot:"reference"},[e("div",{staticClass:"image-slot",staticStyle:{margin:"17px 0",color:"#c0c4cc"},attrs:{slot:"error"},slot:"error"},[t._v(" 图片加载失败 ")])])],1)]}}])}),e("el-table-column",{attrs:{label:"负责人联系方式",width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"borderMP",attrs:{align:"left"}},[t._v(" 姓名："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactName))])]),e("div",{staticClass:"padLeft",attrs:{align:"left"}},[t._v(" 电话："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactPhone))])]),e("div",{staticClass:"padLeft",attrs:{align:"left"}},[t._v(" 邮箱："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactEmail))])])]}}])}),e("el-table-column",{attrs:{label:"队伍地址",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.address))])]}}])}),e("el-table-column",{attrs:{label:"创建时间",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("timeFilter")(a.row.createTime)))])]}}])}),e("el-table-column",{attrs:{label:"人数",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.size))])]}}])}),e("el-table-column",{attrs:{label:"服务时长",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("timestamp")(a.row.totalDuration)))])]}}])}),e("el-table-column",{attrs:{label:"队伍介绍",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{trigger:"hover",placement:"left"}},[e("div",{staticClass:"popoverHover"},[e("p",{staticStyle:{"max-width":"350px","text-align":"justify"}},[t._v(" 队伍介绍："),e("i",[t._v(t._s(a.row.introduction))])])]),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference",align:"left"},slot:"reference"},[e("p",{staticClass:"hiddendh"},[t._v(t._s(a.row.introduction))])])])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleDetails(a.$index,a.row)}}},[t._v(" 查看详情 ")]),e("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.processRow(a.$index,t.tableData)}}},[t._v(" 审核申请 ")])]}}])})],1),e("el-dialog",{attrs:{title:"审核信息",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-radio",{attrs:{label:"1"},model:{value:t.processStatus,callback:function(e){t.processStatus=e},expression:"processStatus"}},[t._v("审核通过")]),e("el-radio",{attrs:{label:"2"},model:{value:t.processStatus,callback:function(e){t.processStatus=e},expression:"processStatus"}},[t._v("审核不通过")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.dialogSub}},[t._v("确 定")])],1)],1),e("el-drawer",{staticClass:"drawer",attrs:{title:"队伍详情",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍详情")]),e("div",{staticClass:"popoverHover flexDetails"},[e("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-image",{staticStyle:{width:"100%"},attrs:{fit:"cover",src:t.drawerData.imgUrl}}),e("el-image",{staticStyle:{width:"200px"},attrs:{slot:"reference",fit:"cover",src:t.drawerData.imgUrl},slot:"reference"},[e("div",{staticClass:"image-slot",staticStyle:{margin:"17px 0",color:"#c0c4cc"},attrs:{slot:"error"},slot:"error"},[t._v(" 图片加载失败 ")])])],1),e("div",[e("span",[t._v("队伍规模："),e("i",[t._v(t._s(t.drawerData.size))])]),e("span",[t._v("队伍现人数："),e("i",[t._v(t._s(t.drawerData.memberNumber))])]),e("span",[t._v(" 服务时长："),e("i",[t._v(t._s(t._f("timestamp")(t.drawerData.totalDuration)))])])])],1)]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍编号及名称")]),e("div",{staticClass:"popoverHover"},[e("span",{staticStyle:{"margin-right":"40px"}},[t._v(" id："),e("i",[t._v(t._s(t.drawerData.id))])]),e("span",[t._v(" 队名："),e("i",[t._v(t._s(t.drawerData.name))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("负责人信息")]),e("div",{staticClass:"popoverHover"},[e("span",{staticStyle:{"margin-right":"40px"}},[t._v(" 姓名："),e("i",[t._v(t._s(t.drawerData.contactName))])]),e("span",[t._v("电话："),e("i",[t._v(t._s(t.drawerData.contactPhone))])]),e("div",{staticStyle:{"margin-top":"10px"}},[t._v(" 邮箱："),e("i",[t._v(t._s(t.drawerData.contactEmail))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍地址和创建时间")]),e("div",{staticClass:"popoverHover"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 地址："),e("i",[t._v(t._s(t.drawerData.address))])]),e("div",[t._v(" 时间："),e("i",[t._v(t._s(t._f("timeFilter")(t.drawerData.createTime)))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍介绍")]),e("div",{staticClass:"popoverHover"},[e("span",[e("i",[t._v(t._s(t.drawerData.introduction))])])])])]),e("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.currentPage,"page-size":t.size,"pager-count":5,layout:"prev, pager, next, jumper, total",total:t.total},on:{"current-change":t.getSelectProcessTeam}})],1)],1)},i=[],r={name:"VolAllTeam",data(){return{searchName:"",processData:[],disabled:!0,tableData:[],currentPage:1,size:8,total:0,dialogVisible:!1,dialogTeamId:"",processStatus:"",buttonWhy:"",drawer:!1,drawerData:{}}},mounted(){this.getSelectProcessTeam()},methods:{handleDetails(t,e){this.drawerData=e,this.drawer=!0},processRow(t,e){this.buttonWhy="one",this.dialogVisible=!0,this.dialogTeamId=e[t].id},handleSelectionChange(t){this.processData=t},proSelection(){this.buttonWhy="more",this.dialogVisible=!0},dialogSub(){if(""!=this.processStatus){if("one"==this.buttonWhy)this.processTeam(this.dialogTeamId,this.processStatus);else if("more"==this.buttonWhy&&0!=this.processData.length)for(let t=0;t<this.processData.length;t++)this.processTeam(this.processData[t].id,this.processStatus);this.dialogVisible=!1,this.$message({type:"success",message:"提交成功!"}),setTimeout((()=>{this.getSelectProcessTeam()}),500)}else this.$message({type:"warning",message:"请先进行申请审核再进行提交!"})},async getSelectProcessTeam(t=1){this.currentPage=t;let e=await this.$http.reqSelectProcessTeam(this.currentPage,this.size);0==e.code?(console.log("查询未审核的志愿服务队",e),this.total=e.data.total,this.tableData=e.data.records):this.$message.error(e.msg)},async processTeam(t,e){let a=await this.$http.reqProcessTeam(t,e);0==a.code?console.log("审核创建志愿服务队申请",a):this.$message.error(a.msg)}},watch:{processData:{immediate:!0,handler(t,e){0!=t.length?this.disabled=!1:this.disabled=!0}}},filters:{timeFilter(t){if(void 0!=t)return`${t.split("T")[0]} ${t.split("T")[1].split(".")[0]}`},timestamp(t){if(void 0!=t){if(0==t)return"0 小时";const e=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3);let i="";return e>0&&(i+=e+"时"),a>0&&(i+=a+"分"),s>0&&(i+=s+"秒"),i}}}},l=r,o=a(1001),n=(0,o.Z)(l,s,i,!1,null,"159e7aa8",null),c=n.exports}}]);