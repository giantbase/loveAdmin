"use strict";(self["webpackChunklove_admin"]=self["webpackChunklove_admin"]||[]).push([[280],{3280:function(t,e,a){a.r(e),a.d(e,{default:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("el-row",[e("el-col",{attrs:{span:24}},[e("div",{staticClass:"search"},[e("el-button",{attrs:{type:"danger",disabled:t.disabled},on:{click:function(e){return t.delSelection()}}},[t._v(" 批量删除 ")]),e("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}},[e("el-button",{staticClass:"searchInput",attrs:{slot:"append",icon:"el-icon-search"},slot:"append"},[t._v("搜索")])],1)],1),e("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""},on:{"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"35",align:"center"}}),e("el-table-column",{attrs:{label:"编号",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.id))])]}}])}),e("el-table-column",{attrs:{label:"队名",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.name))])]}}])}),e("el-table-column",{attrs:{label:"队伍图片",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-image",{staticStyle:{width:"100%"},attrs:{fit:"cover",src:a.row.imgUrl}}),e("el-image",{staticClass:"recycleIMG",attrs:{slot:"reference",fit:"cover",src:a.row.imgUrl},slot:"reference"},[e("div",{staticClass:"image-slot",staticStyle:{margin:"17px 0",color:"#c0c4cc"},attrs:{slot:"error"},slot:"error"},[t._v(" 图片加载失败 ")])])],1)]}}])}),e("el-table-column",{attrs:{label:"负责人联系方式",width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"borderMP",attrs:{align:"left"}},[t._v(" 姓名："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactName))])]),e("div",{staticClass:"padLeft",attrs:{align:"left"}},[t._v(" 电话："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactPhone))])]),e("div",{staticClass:"padLeft",attrs:{align:"left"}},[t._v(" 邮箱："),e("i",{staticClass:"onlyStyle"},[t._v(t._s(a.row.contactEmail))])])]}}])}),e("el-table-column",{attrs:{label:"队伍地址",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.address))])]}}])}),e("el-table-column",{attrs:{label:"创建时间",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("timeFilter")(a.row.createTime)))])]}}])}),e("el-table-column",{attrs:{label:"人数",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.size))])]}}])}),e("el-table-column",{attrs:{label:"服务时长",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("timestamp")(a.row.totalDuration)))])]}}])}),e("el-table-column",{attrs:{label:"队伍介绍",width:"180px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-popover",{attrs:{trigger:"hover",placement:"left"}},[e("div",{staticClass:"popoverHover"},[e("p",{staticStyle:{"max-width":"350px","text-align":"justify"}},[t._v(" 队伍介绍："),e("i",[t._v(t._s(a.row.introduction))])])]),e("div",{staticClass:"name-wrapper",attrs:{slot:"reference",align:"left"},slot:"reference"},[e("p",{staticClass:"hiddendh"},[t._v(t._s(a.row.introduction))])])])]}}])}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{size:"mini",type:"primary",plain:""},on:{click:function(e){return t.handleDetails(a.$index,a.row)}}},[t._v(" 查看详情 ")]),e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteRow(a.$index,t.tableData)}}},[t._v(" 删除 ")])]}}])})],1),e("el-drawer",{staticClass:"drawer",attrs:{title:"队伍详情",visible:t.drawer},on:{"update:visible":function(e){t.drawer=e}}},[e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍详情")]),e("div",{staticClass:"popoverHover flexDetails"},[e("el-popover",{attrs:{placement:"left",width:"350",trigger:"click"}},[e("el-image",{staticStyle:{width:"100%"},attrs:{fit:"cover",src:t.drawerData.imgUrl}}),e("el-image",{staticStyle:{width:"200px"},attrs:{slot:"reference",fit:"cover",src:t.drawerData.imgUrl},slot:"reference"},[e("div",{staticClass:"image-slot",staticStyle:{margin:"17px 0",color:"#c0c4cc"},attrs:{slot:"error"},slot:"error"},[t._v(" 图片加载失败 ")])])],1),e("div",[e("span",[t._v("队伍规模："),e("i",[t._v(t._s(t.drawerData.size))])]),e("span",[t._v("队伍现人数："),e("i",[t._v(t._s(t.drawerData.memberNumber))])]),e("span",[t._v(" 服务时长："),e("i",[t._v(t._s(t._f("timestamp")(t.drawerData.totalDuration)))])])])],1)]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍编号及名称")]),e("div",{staticClass:"popoverHover"},[e("span",{staticStyle:{"margin-right":"40px"}},[t._v(" id："),e("i",[t._v(t._s(t.drawerData.id))])]),e("span",[t._v(" 队名："),e("i",[t._v(t._s(t.drawerData.name))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("负责人信息")]),e("div",{staticClass:"popoverHover"},[e("span",{staticStyle:{"margin-right":"40px"}},[t._v(" 姓名："),e("i",[t._v(t._s(t.drawerData.contactName))])]),e("span",[t._v("电话："),e("i",[t._v(t._s(t.drawerData.contactPhone))])]),e("div",{staticStyle:{"margin-top":"10px"}},[t._v(" 邮箱："),e("i",[t._v(t._s(t.drawerData.contactEmail))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍地址和创建时间")]),e("div",{staticClass:"popoverHover"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[t._v(" 地址："),e("i",[t._v(t._s(t.drawerData.address))])]),e("div",[t._v(" 时间："),e("i",[t._v(t._s(t._f("timeFilter")(t.drawerData.createTime)))])])])]),e("div",[e("h2",{staticClass:"drawerTitle"},[t._v("队伍介绍")]),e("div",{staticClass:"popoverHover"},[e("span",[e("i",[t._v(t._s(t.drawerData.introduction))])])])])]),e("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":t.currentPage,"page-size":t.size,"pager-count":5,layout:"prev, pager, next, jumper, total",total:t.total},on:{"current-change":t.getAllTeam}})],1)],1)},l=[],r={name:"VolAllTeam",data(){return{searchName:"",deleteData:[],disabled:!0,tableData:[],currentPage:1,size:8,total:0,drawer:!1,drawerData:{}}},mounted(){this.getAllTeam()},methods:{handleDetails(t,e){this.drawerData=e,this.drawer=!0},deleteRow(t,e){this.$confirm("此操作将永久删除服务队, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{this.deleteTeam(e[t].id),this.$message({type:"success",message:"删除成功!"}),setTimeout((()=>{this.getAllTeam()}),500)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},handleSelectionChange(t){this.deleteData=t},delSelection(){this.$confirm("此操作将永久删除服务队, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{if(0!=this.deleteData.length)for(let t=0;t<this.deleteData.length;t++)this.deleteTeam(this.deleteData[t].id);this.$message({type:"success",message:"删除成功!"}),setTimeout((()=>{this.getAllTeam()}),500)})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))},async getAllTeam(t=1){this.currentPage=t;let e=await this.$http.reqGetAllTeam(this.currentPage,this.size);0==e.code?(console.log("查询所有通过审核的志愿服务队",e),this.total=e.data.total,this.tableData=e.data.records):this.$message.error(e.msg)},async deleteTeam(t){let e=await this.$http.reqDeleteTeam(t);0==e.code?console.log("删除志愿服务队",e):this.$message.error(e.msg)}},watch:{deleteData:{immediate:!0,handler(t,e){0!=t.length?this.disabled=!1:this.disabled=!0}}},filters:{timeFilter(t){if(void 0!=t)return`${t.split("T")[0]} ${t.split("T")[1].split(".")[0]}`},timestamp(t){if(void 0!=t){if(0==t)return"0 小时";const e=Math.floor(t/36e5),a=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3);let l="";return e>0&&(l+=e+"时"),a>0&&(l+=a+"分"),s>0&&(l+=s+"秒"),l}}}},i=r,n=a(1001),o=(0,n.Z)(i,s,l,!1,null,"4abe985e",null),c=o.exports}}]);