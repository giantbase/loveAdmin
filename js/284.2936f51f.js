"use strict";(self["webpackChunklove_admin"]=self["webpackChunklove_admin"]||[]).push([[284],{3284:function(e,t,l){l.r(t),l.d(t,{default:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("el-row",[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"search"},[t("el-button",{attrs:{type:"warning",disabled:e.disabled},on:{click:function(t){return e.proSelection()}}},[e._v(" 批量审核 ")]),t("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[t("el-button",{staticClass:"searchInput",attrs:{slot:"append",icon:"el-icon-search"},slot:"append"},[e._v("搜索")])],1)],1),t("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:""},on:{"selection-change":e.handleSelectionChange}},[t("el-table-column",{attrs:{type:"selection",width:"100",align:"center"}}),t("el-table-column",{attrs:{label:"编号",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(l.row.memberTeamId))])]}}])}),t("el-table-column",{attrs:{label:"姓名",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("i",{staticClass:"onlyStyle"},[e._v(e._s(l.row.username))])]}}])}),t("el-table-column",{attrs:{label:"手机号码",width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("i",{staticClass:"onlyStyle"},[e._v(e._s(l.row.mobile))])]}}])}),t("el-table-column",{attrs:{label:"申请时间",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(e._f("timeFilter")(l.row.time)))])]}}])}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(t){return e.processRow(l.$index,e.tableData)}}},[e._v(" 审核申请 ")])]}}])})],1),t("el-dialog",{attrs:{title:"审核信息",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("el-radio",{attrs:{label:"1"},model:{value:e.isAllow,callback:function(t){e.isAllow=t},expression:"isAllow"}},[e._v("审核通过")]),t("el-radio",{attrs:{label:"2"},model:{value:e.isAllow,callback:function(t){e.isAllow=t},expression:"isAllow"}},[e._v("审核不通过")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.dialogSub}},[e._v("确 定")])],1)],1),t("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{background:"","current-page":e.currentPage,"page-size":e.size,"pager-count":5,layout:"prev, pager, next, jumper, total",total:e.total},on:{"current-change":e.getAllJoinTeam}})],1)],1)},s=[],i=l(3822),o={name:"CheckVolunteer",data(){return{searchName:"",processData:[],disabled:!0,tableData:[],currentPage:1,size:8,total:0,dialogVisible:!1,dialogTeamId:"",isAllow:"",buttonWhy:""}},mounted(){this.getAllJoinTeam()},computed:{...(0,i.rn)({member:e=>e.user.member})},methods:{processRow(e,t){this.buttonWhy="one",this.dialogVisible=!0,this.dialogTeamId=t[e].memberTeamId},handleSelectionChange(e){this.processData=e},proSelection(){this.buttonWhy="more",this.dialogVisible=!0},dialogSub(){if(""!=this.isAllow){if("one"==this.buttonWhy)this.processJoinTeam(this.dialogTeamId,this.isAllow);else if("more"==this.buttonWhy&&0!=this.processData.length)for(let e=0;e<this.processData.length;e++)this.processJoinTeam(this.processData[e].memberTeamId,this.isAllow);this.dialogVisible=!1,this.$message({type:"success",message:"提交成功!"}),setTimeout((()=>{this.getAllJoinTeam()}),500)}else this.$message({type:"warning",message:"请先进行申请审核再进行提交!"})},async getAllJoinTeam(e=1){this.currentPage=e;let t=await this.$http.reqGetAllJoinTeam(this.currentPage,this.size,this.member.teamId);0==t.code?(console.log("查询申请加入志愿服务队申请",t),this.total=t.data.total,this.tableData=t.data.records):this.$message.error(t.msg)},async processJoinTeam(e,t){let l=await this.$http.reqProcessJoinTeam(e,t);0==l.code?console.log("审核加入志愿服务队申请",l):this.$message.error(l.msg)}},watch:{processData:{immediate:!0,handler(e,t){0!=e.length?this.disabled=!1:this.disabled=!0}}},filters:{timeFilter(e){if(void 0!=e)return`${e.split("T")[0]} ${e.split("T")[1].split(".")[0]}`}}},n=o,r=l(1001),c=(0,r.Z)(n,a,s,!1,null,"44837b62",null),u=c.exports}}]);